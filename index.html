<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>봉사 카드 정보</title>
    <meta name="theme-color" content="#1f6feb" />
    <link rel="manifest" href="manifest.json" />
    <link rel="apple-touch-icon" href="icons/visit-house-192.svg" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="app">
      <header class="app-header">
        <button id="menu-toggle" class="menu-button" type="button">☰</button>
        <h1>봉사 카드 정보</h1>
        <div class="header-right">
          <div id="user-info" class="user-info"></div>
          <button id="refresh-button" class="icon-button" type="button" title="새로고침">⟳</button>
        </div>
      </header>
      <nav id="side-menu" class="side-menu hidden">
        <div class="side-menu-content">
          <div class="side-menu-header">
            <span>메뉴</span>
            <button id="menu-close" class="icon-button" type="button">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" aria-hidden="true">
                <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
          </div>
          <ul class="side-menu-list">
            <li><button type="button" data-menu="cards">구역 카드</button></li>
            <li class="admin-only"><button type="button" data-menu="car-assign">차량 배정</button></li>
            <li class="menu-separator"><span></span></li>
            <li><button type="button" data-menu="visits">완료 내역</button></li>
            <li class="admin-only"><button type="button" data-menu="admin-cards">구역카드 관리</button></li>
            <li class="admin-only"><button type="button" data-menu="admin-ev">전도인 명단 관리</button></li>
          </ul>
        </div>
      </nav>
      <main>
        <div id="area-overlay" class="area-overlay hidden">
          <div class="area-overlay-content">
            <div class="area-overlay-header">
              <span>구역번호</span>
              <button id="close-areas" class="icon-button" type="button">✕</button>
            </div>
            <div id="area-list-overlay" class="list"></div>
          </div>
        </div>
        <div id="completion-overlay" class="area-overlay hidden">
          <div class="area-overlay-content">
            <div class="area-overlay-header">
              <span>완료 내역</span>
              <button id="close-completion" class="icon-button" type="button">✕</button>
            </div>
            <div id="completion-area-list" class="list"></div>
          </div>
        </div>
        <div id="car-assign-overlay" class="area-overlay hidden">
          <div class="area-overlay-content">
            <div class="area-overlay-header">
              <span>차량 배정</span>
              <button id="close-car-assign" class="icon-button" type="button">✕</button>
            </div>
            <div class="car-assign-body">
              <div class="car-assign-left">
                <div id="car-assign-evangelist-list" class="list"></div>
              </div>
              <div class="car-assign-right">
                <div class="car-assign-actions">
                  <button id="car-assign-auto" type="button">자동 배정</button>
                  <button id="car-assign-add" type="button">차량 추가</button>
                  <button id="car-assign-save" type="button">배정 저장</button>
                  <button id="car-assign-reset" type="button" class="car-assign-reset">초기화</button>
                </div>
                <div id="car-assign-meta" class="car-assign-meta"></div>
                <div id="car-assign-selected" class="car-assign-selected"></div>
                <div id="car-assign-panel" class="car-assign-panel"></div>
              </div>
            </div>
          </div>
        </div>
        <div id="admin-overlay" class="area-overlay hidden">
          <div class="area-overlay-content">
            <div class="area-overlay-header">
              <span id="admin-overlay-title">구역카드 관리</span>
              <button id="close-admin" class="icon-button" type="button">✕</button>
            </div>
            <div class="admin-overlay-body">
              <section id="admin-panel" class="panel admin-panel">
                <div class="panel-body">
                  <div class="admin-grid">
                    <div>
                      <h3>구역카드 관리</h3>
                      <div class="admin-actions">
                        <button id="admin-card-add" type="button">카드 추가/수정</button>
                        <button id="admin-card-delete" type="button">카드 삭제</button>
                      </div>
                      <div id="completion-list" class="list"></div>
                    </div>
                    <div>
                      <h3>전도인 명단 관리</h3>
                      <div class="admin-actions">
                        <button id="admin-ev-add" type="button">전도인 추가/수정</button>
                        <button id="admin-ev-delete" type="button">전도인 삭제</button>
                      </div>
                      <div id="evangelist-list" class="list"></div>
                    </div>
                    <div>
                      <h3>방문금지/6개월 카드</h3>
                      <div id="banned-card-list" class="list"></div>
                    </div>
                  </div>
                </div>
              </section>
            </div>
          </div>
        </div>
        <section id="config-panel" class="panel hidden">
          <div class="panel-header">
            <h2>연결 설정</h2>
          </div>
          <div class="panel-body">
            <label class="field">
              <span>앱스 스크립트 URL</span>
              <input id="api-url-input" type="text" placeholder="https://script.google.com/macros/s/..." />
            </label>
            <button id="save-api-url">저장</button>
          </div>
        </section>
        <section id="login-panel" class="panel">
          <div class="panel-header">
            <h2>로그인</h2>
          </div>
          <div class="panel-body">
            <label class="field">
              <span>이름</span>
              <input id="name-input" type="text" />
            </label>
            <label class="field">
              <span>비밀번호</span>
              <input id="password-input" type="password" />
            </label>
            <button id="login-button">로그인</button>
          </div>
        </section>
        <section id="dashboard" class="dashboard hidden">
          <aside class="panel area-panel">
            <div class="panel-header">
              <h2>구역번호</h2>
            </div>
            <div id="area-list" class="panel-body list"></div>
          </aside>
          <section class="panel content-panel">
            <div class="panel-header">
              <h2 id="area-title" class="hidden">구역 선택</h2>
            </div>
            <div class="panel-body">
              <div id="car-info" class="car-info hidden"></div>
              <div id="top-menu" class="top-menu">
                <label class="menu-field">
                  <span>구역</span>
                  <select id="filter-area"></select>
                </label>
                <label class="menu-field">
                  <span>방문상태</span>
                  <select id="filter-visit">
                    <option value="all">전체</option>
                    <option value="meet">만남</option>
                    <option value="absent">부재</option>
                    <option value="invite">초대장</option>
                    <option value="revisit">재방</option>
                    <option value="study">연구</option>
                    <option value="six">6개월</option>
                    <option value="banned">방문금지</option>
                  </select>
                </label>
                <label class="menu-field menu-search">
                  <span>주소 검색어</span>
                  <div class="search-row">
                    <input id="search-input" type="text" placeholder="주소 입력" />
                    <button id="search-button" type="button">검색</button>
                  </div>
                </label>
              </div>
              <div id="area-list-inline" class="list area-inline-list"></div>
              <div id="status-message" class="status-message"></div>
              <div id="card-list" class="card-grid"></div>
              <form id="visit-form" class="visit-form hidden">
                <h3 id="visit-title">방문 기록</h3>
                <label class="field">
                  <span>방문일</span>
                  <input id="visit-date" type="date" />
                </label>
                <label class="field">
                  <span>전도인</span>
                  <input id="visit-worker" type="text" />
                </label>
                <label class="field">
                  <span>결과</span>
                  <select id="visit-result">
                    <option value="만남">만남</option>
                    <option value="부재">부재</option>
                    <option value="초대장">초대장</option>
                    <option value="재방">재방</option>
                    <option value="연구">연구</option>
                    <option value="6개월">6개월</option>
                    <option value="방문금지">방문금지</option>
                  </select>
                </label>
                <label class="field">
                  <span>메모</span>
                  <input id="visit-note" type="text" />
                </label>
                <div class="visit-actions">
                  <button id="save-visit" type="submit">저장</button>
                  <div class="visit-flag-buttons">
                    <button id="visit-clear-revisit" type="button">재방 해제</button>
                    <button id="visit-clear-study" type="button">연구 해제</button>
                    <button id="visit-clear-six" type="button">6개월 해제</button>
                    <button id="visit-clear-banned" type="button">방문금지 해제</button>
                  </div>
                </div>
              </form>
            </div>
          </section>
        </section>
      </main>
    </div>
    <div id="loading-indicator" class="loading-indicator hidden">
      <div class="spinner"></div>
      <span id="loading-text">데이터 불러오는 중...</span>
    </div>
    <script src="config.js"></script>
    <script src="app.js"></script>
  </body>
</html>
